
{{ 'premimum-cart.css' | asset_url | stylesheet_tag }}
<style>
:root{
  --bg_color:{{block.settings.primary_color}};
  --border_radius:{{block.settings.border_radius}}px;
  --count_down_bg:{{block.settings.count_down_bg}};
  --countdown_text_color:{{block.settings.countdown_text_color}};
  --countdown_chip_bg:{{block.settings.countdown_chip_bg}};
  --countdown_chip_text:{{block.settings.countdown_chip_text}};
  --countdown_border_radius:{{block.settings.countdown_border_radius}}px;
  --countdown_chip_radius:{{block.settings.countdown_chip_radius}}px;
  --body_background_color: {{block.settings.body_color}};
  --text_color:{{block.settings.text_color}};
} 
.sr-countdown{
  background: linear-gradient(135deg, var(--count_down_bg) 0%, color-mix(in srgb, var(--count_down_bg) 85%, #000) 100%);
  border-radius: var(--countdown_border_radius);
}
.sr-countdown__label { color: var(--countdown_text_color); }
.sr-sep { color: var(--countdown_text_color); }
.sr-chip { 
  background: var(--countdown_chip_bg);
  color: var(--countdown_chip_text);
  border-radius: var(--countdown_chip_radius);
}
.sr-cart-banner-container {background: var(--bg_color);}
.cdp-u-add {background: var(--bg_color); border-radius:var(--border_radius); text-align:center;}
.cdp-line{border-radius:var(--border_radius);}
.cdp-line-media img{border-radius:var(--border_radius);}
.cdp-u-select{border-radius:var(--border_radius);}
#third-party-integration{border-radius:var(--border_radius); background: var(--bg_color);}
.cdp-body{background: var(--body_background_color);}
.cdp-u-final{color:var(--bg_color);}
.cdp-upsell{background: var(--body_background_color);}
.cdp-u-title{color:var(--text_color);}
.reward-progress-bar{color:var(--text_color);}
.cdp-total-lbl, .cdp-total-val{color:var(--text_color);}
@media(max-width:767px){ 

  .mobile-upsell-btn {
      font-size: 1rem;
      display:none;
      text-align: center;
      padding: .2rem 0;
      border-top-left-radius: var(--border_radius);
      border-top-right-radius: var(--border_radius);
      background: var(--bg_color);
      color: #fff;
      position: absolute;
      bottom: 60px;
      left: 0;
      right: 0;

  }
  .mobile-upsell-btn>span {
    text-decoration: underline;
  }
  .upsell-mob-close-icon {
    display: block !important;
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    top: -40px;
    z-index: 99;
    background: #fff;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    text-align: center;
    font-size: 16px;
    line-height: 1.8;
}
}
</style>
<style>{{block.settings.custom-css-code}}</style>

<section
  id="CartDrawerPremium"
  class="cdp-drawer{% if cart == empty %} cdp-empty{% endif %}"
  aria-hidden="true"
  tabindex="-1"
  data-open-class="cdp-open"
  data-money-format="{{ shop.money_format | escape }}"
  data-currency="{{ shop.currency }}"
  shop-url="{{shop.url}}"
  data-shop="{{ shop.permanent_domain }}"
  data-app-url="https://quickcart-vf8k.onrender.com"
>




  <div class="cdp-overlay" data-close></div>
  <aside class="cdp-upsell">



        <div class="cdp-upsell-head">
          <span>UpSell</span>
          <span class="upsell-mob-close-icon" style="display:none;">âœ•</span>
          <div class="cdp-v-ctrls">
            <button class="cdp-v-btn" data-v-prev aria-label="Previous">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 199.404 199.404" style="enable-background:new 0 0 199.404 199.404;" xml:space="preserve">
<g>
	<polygon points="0,135.411 28.285,163.695 99.703,92.277 171.119,163.695 199.404,135.412 99.703,35.709  "/>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>
            </button>
            <button class="cdp-v-btn" data-v-next aria-label="Next">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 199.404 199.404" style="enable-background:new 0 0 199.404 199.404;" xml:space="preserve">
<g>
	<polygon points="199.404,63.993 171.12,35.709 99.702,107.127 28.284,35.709 0,63.993 99.702,163.695  "/>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>
            </button>
          </div>
        </div>

        <div class="cdp-v-slider" data-v-slider>
          <div class="cdp-v-track">
           {% if shop.metafields.custom.upsell_collection_handle != blank %}
             {% assign upsell_collection = shop.metafields.custom.upsell_collection_handle.value %}

              {% assign usell = collections[ upsell_collection ] %}

              {% for p in usell.products limit: 12 %}
                <article class="cdp-u-card" data-upsell-card>
                  <div class="cdp-u-media">
                    <img loading="lazy" src="{{ p.featured_image | image_url: width: 300 }}" alt="{{ p.title | escape }}" width="300" height="300">
                    <button class="cdp-u-add-btn" data-open-upsell-popup data-product-id="{{ p.id }}" data-product-handle="{{ p.handle }}" data-variant-id="{{ p.first_available_variant.id }}" data-product-title="{{ p.title | escape }}" data-product-image="{{ p.featured_image | image_url: width: 400 }}" data-product-price="{{ p.price_min | money_without_trailing_zeros }}" data-product-compare-price="{% if p.compare_at_price_min > p.price_min %}{{ p.compare_at_price_min | money_without_trailing_zeros }}{% endif %}" data-product-url="{{ p.url }}" data-has-variants="{% if p.variants.size > 1 %}true{% else %}false{% endif %}" {% unless p.first_available_variant.available %}disabled{% endunless %}>Add</button>
                  </div>
                  <div class="cdp-u-info">
                    <div class="cdp-u-title">{{ p.title | escape | truncate: 22 }}</div>
                    <div class="cdp-u-price">
                      <span class="cdp-u-final">{{ p.price_min | money_without_trailing_zeros }}</span>
                     
                    </div>
                  </div>
                </article>
              {% endfor %}
            {% else %}
              <div class="cdp-u-empty">Add an upsell collection in settings</div>
            {% endif %}
          </div>
        </div>
      </aside>

  <div class="cdp-panel color-{{ settings.cart_color_scheme | default: 'background-1' }}">

<div id="upcart_loader">
<div class="loader-wrapper">
   <div class="loader" style="display:block"></div>
  </div>
</div>


<div class="quick-cart-header-section">

  

    <!-- Header (fixed) -->
    <header class="cdp-header" >
      <div class="cdp-h-left">
        <span class="cdp-h-title">Your Cart</span>
        <span class="cdp-h-count" data-cart-count>({{ cart.item_count }})</span>
      </div>
      <button class="cdp-close" aria-label="Close" data-close>&#10005;</button>
    </header>
 {% render 'timer' show_countdown:block.settings.show_countdown, backgroundcolor:block.settings.count_down_bg %}
    {% render 'announcementbar' show_announcementbar:block.settings.show_announcementbar_text,  announcementbar_text:block.settings.announcementbar_text %}
   
    {%  render 'progress-bar' %}
    {% render 'progressbar_qty_condition' %}

    
    </div>
    <div class="cdp-body">
      <!-- Left rail: vertical upsell slider with VARIANT PICKER -->
   

      <!-- Right pane: scrollable contenxt -->
      <main class="cdp-content">
    
       
        <!-- Cart line items (AJAX-render target) -->
        <div class="cdp-lines" data-lines>
          {% for item in cart.items %}
            <article class="cdp-line" data-line-key="{{ item.key }}">
              <div class="cdp-line-media">
                <img
                  src="{{ item.image | image_url: width: 180 }}"
                  alt="{{ item.product.title | escape }}"
                  width="90"
                  height="90"
                  loading="lazy"
                >
              </div>
              <div class="cdp-line-info">
                <div class="cdp-line-header">
                  <div class="cdp-line-title">{{ item.product.title | escape | truncate: 28 }}</div>
                  <div class="cdp-line-prices">
                    <span class="cdp-line-final">{{ item.final_line_price | money_without_trailing_zeros }}</span>
                    {% if item.original_line_price > item.final_line_price %}
                      <span class="cdp-line-compare">{{ item.original_line_price | money_without_trailing_zeros }}</span>
                    {% endif %}
                  </div>
                </div>
                <div class="cdp-line-meta">
                  {% if item.variant.title and item.variant.title != 'Default Title' %}
                    <span class="cdp-line-variant">{{ item.variant.title | escape }}</span> - 
                  {% endif %}
                  <span class="cdp-line-qty-label">Quantity {{ item.quantity }}</span>
                </div>
                {% if item.line_level_discount_allocations.size > 0 %}
                  {% for discount in item.line_level_discount_allocations %}
                    <div class="cdp-line-offer">
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
                        <line x1="7" y1="7" x2="7.01" y2="7"></line>
                      </svg>
                      {{ discount.discount_application.title }} (-{{ discount.amount | money_without_trailing_zeros }})
                    </div>
                  {% endfor %}
                {% elsif item.original_line_price > item.final_line_price %}
                  {% assign discount_percent = item.original_line_price | minus: item.final_line_price | times: 100 | divided_by: item.original_line_price %}
                  <div class="cdp-line-offer">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
                      <line x1="7" y1="7" x2="7.01" y2="7"></line>
                    </svg>
                    {{ discount_percent }}% Off Applied
                  </div>
                {% endif %}
                <div class="cdp-line-bottom">
                  <div class="cdp-qty" data-qty-wrap>
                    <button class="cdp-qty-btn" data-qty-down aria-label="Decrease quantity">âˆ’</button>
                    <input class="cdp-qty-input" type="number" min="0" value="{{ item.quantity }}" data-qty aria-label="Quantity">
                    <button class="cdp-qty-btn" data-qty-up aria-label="Increase quantity">+</button>
                  </div>
                  <button class="cdp-line-remove" data-remove="{{ item.key }}" aria-label="Remove item">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <polyline points="3 6 5 6 21 6"></polyline>
                      <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                      <line x1="10" y1="11" x2="10" y2="17"></line>
                      <line x1="14" y1="11" x2="14" y2="17"></line>
                    </svg>
                  </button>
                </div>
              </div>
            </article>
          {% endfor %}
          {% if cart.item_count == 0 %}
            <div class="cdp-empty-msg">Your cart is empty.</div>
          {% endif %}
     
            
       
        </div>

<div class="mob_upsell">
          <aside class="cdp-upsell">
        <div class="cdp-upsell-head">
          <span>You May Also Like</span>
          <span class="upsell-mob-close-icon" style="display:none;">âœ•</span>
        </div>

        <div class="cdp-v-slider" data-v-slider>
          <div class="cdp-v-track">
               {% if shop.metafields.custom.upsell_collection_handle != blank %}
                  {% assign upsell_collection = shop.metafields.custom.upsell_collection_handle %}

              {% assign usell = collections[ upsell_collection ] %}
              {% for p in usell.products limit: 12 %}
                <article class="cdp-u-card" data-upsell-card>
                  <div class="cdp-u-media">
                    <img loading="lazy" src="{{ p.featured_image | image_url: width: 300 }}" alt="{{ p.title | escape }}" width="300" height="300">
                    <button class="cdp-u-add-btn" data-open-upsell-popup data-product-id="{{ p.id }}" data-product-handle="{{ p.handle }}" data-variant-id="{{ p.first_available_variant.id }}" data-product-title="{{ p.title | escape }}" data-product-image="{{ p.featured_image | image_url: width: 400 }}" data-product-price="{{ p.price_min | money_without_trailing_zeros }}" data-product-compare-price="{% if p.compare_at_price_min > p.price_min %}{{ p.compare_at_price_min | money_without_trailing_zeros }}{% endif %}" data-product-url="{{ p.url }}" data-has-variants="{% if p.variants.size > 1 %}true{% else %}false{% endif %}" {% unless p.first_available_variant.available %}disabled{% endunless %}>Add</button>
                  </div>
                  <div class="cdp-u-info">
                    <div class="cdp-u-title">{{ p.title | escape | truncate: 22 }}</div>
                    <div class="cdp-u-price">
                      <span class="cdp-u-final">{{ p.price_min | money_without_trailing_zeros }}</span>
                    
                    </div>
                  </div>
                </article>
              {% endfor %}
            {% else %}
              <div class="cdp-u-empty">Add an upsell collection in settings</div>
            {% endif %}
          </div>
        </div>
      </aside>
      </div>
        
        <!-- Offers applied -->
      </main>
    </div>


<div class="mobile-upsell-btn" style="display:none;">Upsell Products  <span>View</span></div>

<!-- Gift Wrap Section -->
<div class="cdp-gift-wrap-section">

{% if shop.metafields.custom.gift_product_handle != blank %}
 {% assign gift_product = shop.metafields.custom.gift_product_handle %}
 {% render 'gift' giftproduct:gift_product, show_gift_Card: block.settings.show_gift_product %}
{% endif %}

 
</div>

<div class="mini-cart-order-summary-content">
              <!-- Offer Badge -->
              <div class="combined-offer-badge" id="summary-combined-offer-badge">ðŸŽ‰ Continue to safe checkout ðŸŽ‰!</div>
              <div class="mini-cart-order-summary" style="display: block;">
                <div class="summary-heading">
                  <span class="summary-heading-text">Bill Summary</span>
                  <button class="summary-close-btn" data-close-summary aria-label="Close">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                  </button>
                </div>
                <p>
                  Subtotal
                  <span class="sr-sub-total" data-subtotal>{{ cart.total_price | money_without_trailing_zeros }}</span>
                </p>
                <p class="discount-applied-at-cartdrawer">Discount applied
                   <span class="discounted-value">-10</span>
                </p>

                <p class="" id="sr-cart-shipping-charges-container">
                  Shipping Charges
                  <span class="sr-cart-shipping-charges">Calculated on checkout</span>
                </p>
                
              </div>
  </div>
  <canvas id="partyCanvas" style="position: absolute; top: 0; left: 0; pointer-events: none; z-index: 9999; width: 100%; height: 100%;"></canvas>

    <!-- Bottom checkout bar (fixed) -->
    <footer class="cdp-footer">
     
      <!-- Left: Subtotal + coupon (compact) -->
      <div style="display:none;" class="cdp-footer-left">
      

        <div class="cdp-coupon-row">
          <div class="cdp-coupon">
            <input type="text" placeholder="Discount code" maxlength="40" data-coupon>
            <button class="cdp-apply" data-apply-coupon>Apply</button>
          </div>


          <!-- Discount status chip (appears after Apply) -->
          <div class="cdp-discount-row" data-discount-row hidden>
            <div class="cdp-discount-chip">
              <span class="cdp-discount-badge">Code</span>
              <span class="cdp-discount-code" data-discount-code></span>
              <span class="cdp-discount-note">will apply at checkout</span>
              <button class="cdp-discount-clear" data-discount-clear aria-label="Remove discount">Ã—</button>
            </div>
          </div>
          <div class="cdp-offers" data-offers>
            {% if cart.total_discount > 0 %}
              <div class="cdp-offer-row">
                <span class="cdp-offer-chip">Offer</span>
                <span class="cdp-offer-text">Discounts applied</span>
                <span class="cdp-offer-val">-{{ cart.total_discount | money }}</span>
              </div>
            {% else %}
              {% if block.settings.offer_text != blank %}
                <div class="cdp-offer-row">
                  <span class="cdp-offer-chip">Offer</span>
                  <span class="cdp-offer-text">{{ block.settings.offer_text }}</span>
                </div>
              {% endif %}
            {% endif %}
          </div>
        </div>

      </div>


      <div class="cdp-footer-right">

       <div class="left-checkout">

        <div class="cdp-subrow" style="display:none;">
          <span>Subtotal</span>
          <strong data-subtotal>{{ cart.total_price | money }}</strong>
        </div>

        <div class="cdp-total">
          <span id="ds-checkout-btn" class="cdp-total-lbl">Estimated Total <img src="https://pickrr.s3.amazonaws.com/2025-07-28T06:04:01.669652_arrow.png" id="checkout-arrow-image"></span>
          <span class="cdp-total-val" data-total>{{ cart.total_price | money_without_trailing_zeros }}</span>
        </div>

       </div>

       
      {% assign thirdPartyHtml = shop.metafields.custom.third_party_checkout_html | strip %}

      {% if thirdPartyHtml != blank %}
        <div 
          id="third-party-integration-wrapper"
          style="position: relative; z-index: 100; pointer-events: auto;"
        >
          {{ thirdPartyHtml | liquid }}
        </div>
      {% endif %}


  <a
    href="/checkout"
    class="cdp-checkout"
    data-checkout
    aria-label="Proceed to checkout"
  >
    Checkout
  </a>


     
    </footer>


  </div>

  <!-- Upsell Product Popup Modal -->
  <div class="cdp-upsell-popup" id="upsellPopup" style="display: none;">
    <div class="cdp-popup-overlay" data-close-popup></div>
    <div class="cdp-popup-content">
      <button class="cdp-popup-close" data-close-popup aria-label="Close">Ã—</button>
      <div class="cdp-popup-images">
        <img id="popupProductImage" class="cdp-popup-img" src="" alt="Product Image">
        <img id="popupProductImage2" class="cdp-popup-img" src="" alt="Product Image 2">
      </div>
      <div class="cdp-popup-info">
        <h3 class="cdp-popup-title" id="popupProductTitle"></h3>
        <div class="cdp-popup-price">
          <!-- Prices are populated from Liquid via data-product-price attributes on buttons -->
          <!-- JavaScript displays the Liquid-formatted prices when popup opens -->
          <span class="cdp-popup-final" id="popupProductPrice"></span>
          <span class="cdp-popup-compare" id="popupProductCompare"></span>
        </div>
        <!-- Variant Selector Buttons -->
        <div class="cdp-popup-variants" id="popupVariantsWrap" style="display: none;">
          <label class="cdp-popup-variant-label">Select Option:</label>
          <div class="cdp-popup-variant-btns" id="popupVariantBtns"></div>
        </div>
        <div class="cdp-popup-qty">
          <button class="cdp-popup-qty-btn" data-popup-qty-down>âˆ’</button>
          <input type="number" class="cdp-popup-qty-input" id="popupQty" value="1" min="1">
          <button class="cdp-popup-qty-btn" data-popup-qty-up>+</button>
          <button class="cdp-popup-add-btn" id="popupAddBtn" data-variant-id="">Add</button>
        </div>
        <button class="cdp-popup-view-btn" id="popupViewBtn">
          <span>View Details</span>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg>
        </button>
      </div>
    </div>
  </div>
</section>
<script src="{{ 'cartdrawer-settings.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'settings.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'premimum-cart.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'progress-bar.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'progressbar_qty_condition.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'bxfreeproduct.js' | asset_url }}" defer="defer"></script>


{% schema %}
{
  "name": "Premium Cart Drawer",
  "target":"body",
  "settings": [
    { "type": "checkbox", "id": "show_countdown", "label": "Show countdown", "default": false },
    {
      "type": "color",
      "id": "count_down_bg",
      "label": "Countdown Background",
      "default": "#5B9BD5",
      "info": "Timer background color"
    },
    {
      "type": "color",
      "id": "countdown_text_color",
      "label": "Countdown Text Color",
      "default": "#ffffff",
      "info": "Timer label text color"
    },
    {
      "type": "color",
      "id": "countdown_chip_bg",
      "label": "Countdown Chip Background",
      "default": "#ffffff",
      "info": "Timer number chip background"
    },
    {
      "type": "color",
      "id": "countdown_chip_text",
      "label": "Countdown Chip Text",
      "default": "#2c3e50",
      "info": "Timer number text color"
    },
    {
      "type": "range",
      "id": "countdown_border_radius",
      "label": "Countdown Border Radius",
      "min": 0,
      "max": 50,
      "step": 1,
      "default": 50,
      "unit": "px",
      "info": "Roundness of timer container"
    },
    {
      "type": "range",
      "id": "countdown_chip_radius",
      "label": "Countdown Chip Radius",
      "min": 0,
      "max": 20,
      "step": 1,
      "default": 10,
      "unit": "px",
      "info": "Roundness of number chips"
    },
    { "type": "collection", "id": "upsell_collection", "label": "Upsell collection", "info":"Chnage Upsell Collection" },
    {
      "type": "color",
      "id": "primary_color",
      "label": "Button Background ",
      "default": "#7c3444",
      "info":"Buttons + Prices Color Change"
    },
   {
      "type": "color",
      "id": "body_color",
      "label": "Body Color ",
      "default": "#f0e5e7",
      "info":"Body Color Change"
    },
       {
      "type": "color",
      "id": "text_color",
      "label": "Content Color ",
      "default": "#000",
      "info":"Text Color Change"
    },
     {
      "type": "range",
      "id": "border_radius",
      "label": "Border Radius",
      "min": 1,
      "max": 100,
      "step": 1,
      "default": 10
    },
     { "type": "checkbox", "id": "show_announcementbar_text", "label": "Show Announcement Bar", "default": false },
    { "type": "textarea", "id": "announcementbar_text", "label": "Announcement Text", "default": "Welcome to my shop!" },
    { 
      "type": "checkbox",
      "id": "show_gift_product", 
      "label": "Show Gift Product", 
      "default": false 
    },
   {
    "type": "product",
    "id": "gift_wrap_product",
    "label": "Select  Gift  product"
  },
  { 
      "type": "checkbox",
      "id": "show-checkout-field", 
      "label": "Enable Third-party Integretion", 
      "default": false 
    },
  {
    "type":"liquid",
    "id":"checkout-integration-code",
    "label":"Third-Party integration code Paste Here"
  },
  {
    "type":"liquid",
    "id":"custom-css-code",
    "label":"Custom Css Write here..",
    "info":"Custom Css"
  }
 

  ]
}
{% endschema %}



